# Angular

## Homepage

- <a target="_blank" href="https://angular.io/">Angular: Features, Docs, Resources, Events</a>
- <a target="_blank" href="https://material.angular.io">Angular: Materials</a>

## Angular CLI

- <a target="_blank" href="https://cli.angular.io/">Angular CLI</a>

## Best Practices

- <a target="_blank" href="https://alligator.io/angular/">alligator.io: Angular</a>

## Libraries

- Redux / ngrx / rxjs
  - <a href="https://github.com/ngrx/platform" target="_blank">@ngrx (Reactive libraries for Angular)</a>
  - <a href="https://gist.github.com/btroncone/a6e4347326749f938510" target="_blank">Comprehensive Introduction to @ngrx/store</a>
  - <a href="https://rxjs-dev.firebaseapp.com/" target="_blank">RxJS - Reactive Extensions Library for JavaScript</a>
  - <a href="http://rxmarbles.com/" target="_blank">RxJS Marbles</a>
  - <a href="https://redux.js.org/" target="_blank">Redux Framework</a>
- Data servers
  - <a href="https://github.com/typicode/json-server" target="_blank">JSON Server</a>
  - <a href="https://jsonplaceholder.typicode.com/" target="_blank">JSONPlaceholder</a>
  - <a href="https://www.mocky.io/" target="_blank">mocky.io</a>
  - <a href="https://www.mocky.io/v2/58de0960280000a31d9e4bc1" target="_blank">mocky.io: sample</a>

## Components

- <a href="https://www.ag-grid.com/" target="_blank">agGrid (UI)</a>
- <a href="https://material.angular.io/" target="_blank">Angular Material (UI)</a>
- <a href="https://github.com/FuelInteractive/fuel-ui" target="_blank">Fuel-UI (UI)</a>
- <a href="https://www.jqwidgets.com/" target="_blank">jQWidgets (UI)</a>
- <a href="https://github.com/ng-lightning/ng-lightning" target="_blank">ng-lightning (UI)</a>
- <a href="http://valor-software.com/ngx-bootstrap/#/" target="_blank">NGX-Bootstrap (UI)</a>
- <a href="https://ng-semantic.herokuapp.com/#/" target="_blank">ngSemantic (UI)</a>
- <a href="https://onsen.io/" target="_blank">Onsen UI (UI)</a>
- <a href="https://www.primefaces.org/primeng/#/" target="_blank">PrimeNG (UI)</a>
- <a href="https://github.com/valor-software/ng2-dragula" target="_blank">Dragula (drag'n'drop)</a>

## Blogs

### Angular

- <a href="https://blog.angularindepth.com/everything-you-need-to-know-about-debugging-angular-applications-d308ed8a51b4" target="_blank">Angular: Everything you need to know about debugging Angular applications</a>
- <a target="_blank" href="https://blog.angular.io/version-6-of-angular-now-available-cc56b0efa7a4">Angular: Version 6 of Angular Now Available</a>

### INTERTECH

- <a href="https://www.intertech.com/Blog/ngrx-tutorial-actions-reducers-and-effects/" target="_blank">NgRx Tutorial: Actions, Reducers and Effects</a>
- <a href="https://www.intertech.com/Blog/ngrx-tutorial-quickly-adding-ngrx-to-your-angular-6-project/" target="_blank">NgRx Tutorial: Quickly Adding NgRx to Your Angular 6 Project</a>
- <a href="https://www.intertech.com/Blog/ngrx-tutorial-accessing-state-in-the-store/" target="_blank">NgRx Tutorial: Accessing State in the Store</a>
- <a href="https://www.intertech.com/Blog/ngrx-tutorial-add-state-to-feature-module/" target="_blank">NgRx Tutorial: Add State to Feature Module</a>
- <a href="https://www.intertech.com/Blog/ngrx-tutorial-add-router-info-to-state/" target="_blank">NgRx Tutorial: Add Router Info to State</a>

### Medium

- <a href="https://blog.bitsrc.io/11-angular-component-libraries-you-should-know-in-2018-e9f9c9d544ff" target="_blank">bitsrc: 11 Angular Component Libraries You Should Know In 2018</a>
- <a target="\_blank" href="https://gist.github.com/btroncone/a6e4347326749f938510">GitHubGist: Comprehensive Introduction to @ngrx/store</a>
- <a href="https://itnext.io/ngrx-best-practices-for-enterprise-angular-applications-6f00bcdf36d7" target="_blank">itnext.io: NgRx - Best Practices for Enterprise Angular Applications</a>
- <a href="https://medium.com/front-end-hacking/a-guide-to-debugging-angular-applications-5a36bd88b4cf" target="_blank">Medium: A Guide To Debugging Angular Applications</a>
- <a target="\_blank" href="https://itnext.io/angular-tutorial-create-loading-indicator-using-ngrx-687f8a66be0d">Medium: Angular tutorial - Create loading indicator using NgRx</a>
- <a target="\_blank" href="https://medium.com/@amcdnl/dispatching-multiple-actions-from-ngrx-effects-c1447ceb6b22">Medium: Dispatching Multiple Actions from NGRX Effects</a>
- <a href="https://medium.com/@amcdnl/global-error-handling-with-angular2-6b992bdfb59c" target="_blank">Medium: Global Error Handling with Angular2+</a>
- <a target="_blank" href="https://medium.com/@amcdnl/introducing-ngrx-actions-3-0-557f6ce16678">Medium: Introducing NGRX Actions 3.0</a>
- <a href="https://medium.com/ngrx/introducing-ngrx-entity-598176456e15" target="_blank">Medium: Introducing @ngrx/entity</a>
- <a href="https://medium.com/@ladyleet/popups-modals-and-navigation-using-angular-material-2-components-in-your-angular-2-project-faf510dbcdee" target="_blank">Medium: Popups, Modals, and Navigation - Using Angular Material (2) Components in your Angular (2) Project</a>
- <a target="_blank" href="https://medium.com/@roger.rudin/reducing-the-boilerplate-code-in-ngrx-dcf9ee9df16e">Medium: Reducing the boilerplate code in NGRX</a>
- <a target="_blank" href="https://medium.com/@amcdnl/reducing-the-boilerplate-with-ngrx-actions-8de42a190aac">Medium: Reducing the boilerplate with NGRX-Actions</a>
- <a target="_blank" href="https://medium.com/default-to-open/understanding-a-large-scale-angular-app-with-ngrx-80f9fc5660cc">Medium: Understanding a large scale angular app with @ngrx</a>
- <a href="https://medium.com/@zalmoxis/using-redux-devtools-in-production-4c5b56c5600f" target="_blank">Medium: Using Redux DevTools in production</a>
- <a target="_blank" href="https://medium.com/@tomastrajan/6-best-practices-pro-tips-for-angular-cli-better-developer-experience-7b328bc9db81">Medium: 6 Best Practices and Pro Tips when using Angular CLI</a>

## Best Practices

### How to define a service with type definition

File name: vehicle.service.ts | Service name: VehicleService | Return type: <code>Vehicle[]</code>

```javascript
import { HttpClient } from '@angular/common/http';
import { Injectable } from '@angular/core';
import { Observable } from 'rxjs';
import { tap, map } from 'rxjs/operators';
import { Vehicle } from './../models/vehicle.model';
@Injectable({
  providedIn: 'root'
})
export class VehicleService {
  constructor(private _http: HttpClient) {}
  /**
   * Find all vehicles.
   * @returns {Vehicle[]}  -  A list of vehicles.
   */
  public findAll(): Observable<Vehicle[]> {
    return this._http.get<Vehicle[]>('http://localhost:3000/vehicles');
  }
}
```

### Service as component communication

#### Communication service:

````javascript
import { Injectable } from '@angular/core';
@Injectable()
export class LessonSelectedService {

  private _selected: BehaviorSubject<Lesson> = new BehaviorSubject(null);

  public selected$ = this._selected.asObservable().filter(lesson => !!lesson);

  select(lesson:Lesson) {
        this._selected.next(lesson);
  }
}
```
#### Submitting component

```javascript
import { Component } from '@angular/core';
@Component({
  selector: 'custom-lessons-list',
  template: '<lessons-list [lessons]="lessons" (lesson)="selectLesson($event)"></lessons-list>'
})
export class CustomLessonsListComponent {
  constructor(private lessonSelectedService: LessonSelectedService) {}
  selectLesson(lesson) {
    this.lessonSelectedService.select(lesson);
  }
}
```

#### Listening component

```javascript
import { Component, OnInit } from '@angular/core';
@Component({...})
export class HomeComponent implements OnInit {
  lessons: Lesson[];
  constructor(
    private lessonsService: LessonsService,
    private lessonSelectedService: LessonSelectedService) {}
  ngOnInit() {
      ....
      this.lessonSelectedService.selected$.subscribe(lesson => this.selectLesson(lesson));
  }
  selectLesson(lesson) {
    ...
  }
}
```

### tsconfig.json: own path definitions

To use of the @-annotations for imports within own project modules.

```json
...
"paths": {
  "@observableWeather/*": ["app/with-observables/*"],
  "@currentWeather/*": ["app/current/*"],
  "@app/*": ["app/*"],
  "@env/*": ["environments/*"]
}
...
```

### Add NgRx Store

#### Best Practice #1 — The Root Store Module

1. Install packages via NPM:

```cmd
npm install @ngrx/{store,store-devtools,entity,effects}
```

otherwise use this statement:

```cmd
npm install @ngrx/store @ngrx/effects @ngrx/store-devtools --save
```

2. Generate RootStoreModule:

```cmd
ng g module root-store —-flat false —-module app.module.ts
```

3. Generate RootState interface to represent the entire state of your application:

```cmd
ng g interface root-store/root-state
```

#### Best Practice #2 — Create Feature Store Module(s)

Suggested Implementation — Standard Feature Module

1. Generate MyFeatureStoreModule feature module

```cmd
ng g module root-store/my-feature-store --flat false --module root-store/root-store.module.ts
```

2. Actions — Create an actions.ts file in the app/root-store/my-feature-store directory:

Action Interface

```javascript
export interface Action {
  type: string;
  payload?: any;
}
```

Example actions

```javaScript
import { Action } from '@ngrx/store';
import { User } from '../../models';

export enum ActionTypes {
  LOGIN_REQUEST = '[My Feature] Login Request',
  LOGIN_FAILURE = '[My Feature] Login Failure',
  LOGIN_SUCCESS = '[My Feature] Login Success'
}

export class LoginRequestAction implements Action {
  readonly type = ActionTypes.LOGIN_REQUEST;
  constructor(public payload: { userName: string; password: string }) {}
}

export class LoginFailureAction implements Action {
  readonly type = ActionTypes.LOGIN_FAILURE;
  constructor(public payload: { error: string }) {}
}

export class LoginSuccessAction implements Action {
  readonly type = ActionTypes.LOGIN_SUCCESS;
  constructor(public payload: { user: User }) {}
}

export type Actions = LoginRequestAction | LoginFailureAction | LoginSuccessAction;
```

More sample Actions

```javascript
//simple action without a payload
dispatch({ type: "DECREMENT" });

//action with an associated payload
dispatch({
  type: ADD_TODO,
  payload: { id: 1, message: "Learn ngrx/store", completed: true }
});
```

3. State — Create a state.ts file in the app/root-store/my-feature-store directory

```javascript
import { User } from "../../models";

export interface State {
  user: User | null;
  isLoading: boolean;
  error: string;
}

export const initialState: State = {
  user: null,
  isLoading: false,
  error: null
};
```

4. Reducer — Create a reducer.ts file in the app/root-store/my-feature-store directory

Reducer Interface

```javascript
export interface Reducer<T> {
  (state: T, action: Action): T;
}
```

Example reducer: featureReducer

```javascript
import { Actions, ActionTypes } from "./actions";
import { initialState, State } from "./state";

export function featureReducer(state = initialState, action: Actions): State {
  switch (action.type) {
    case ActionTypes.LOGIN_REQUEST:
      return {
        ...state,
        error: null,
        isLoading: true
      };
    case ActionTypes.LOGIN_SUCCESS:
      return {
        ...state,
        user: action.payload.user,
        error: null,
        isLoading: false
      };
    case ActionTypes.LOGIN_FAILURE:
      return {
        ...state,
        error: action.payload.error,
        isLoading: false
      };
    default: {
      return state;
    }
  }
}
```

5. Selectors — Create a selectors.ts file in the app/root-store/my-feature-store directory

```javascript
import {
  createFeatureSelector,
  createSelector,
  MemoizedSelector
} from "@ngrx/store";

import { User } from "../../models";

import { State } from "./state";

const getError = (state: State): any => state.error;

const getIsLoading = (state: State): boolean => state.isLoading;

const getUser = (state: State): any => state.user;

export const selectMyFeatureState: MemoizedSelector<object, State> =
  createFeatureSelector < State > `("myFeature")`;

export const selectMyFeatureError: MemoizedSelector<
  object,
  any
> = createSelector(selectMyFeatureState, getError);

export const selectMyFeatureIsLoading: MemoizedSelector<
  object,
  boolean
> = createSelector(selectMyFeatureState, getIsLoading);

export const selectMyFeatureUser: MemoizedSelector<
  object,
  User
> = createSelector(selectMyFeatureState, getUser);
```

6. Effects — Create an effects.ts file in the app/root-store/my-feature-store directory with the following

```javascript
import { Injectable } from '@angular/core';
import { Actions, Effect, ofType } from '@ngrx/effects';
import { Action } from '@ngrx/store';
import { Observable, of as observableOf } from 'rxjs';
import { catchError, map, startWith, switchMap } from 'rxjs/operators';
import { DataService } from '../../services/data.service';
import * as featureActions from './actions';

@Injectable()
export class MyFeatureStoreEffects {
  constructor(private dataService: DataService, private actions$: Actions) {}

  @Effect()
  loginRequestEffect$: Observable<Action> = this.actions$.pipe(
    ofType<featureActions.LoginRequestAction>(
      featureActions.ActionTypes.LOGIN_REQUEST
    ),
    switchMap(action =>
      this.dataService
	.login(action.payload.userName, action.payload.password)
	.pipe(
	  map(
	    user =>
	      new featureActions.LoginSuccessAction({
		user
	      })
	  ),
	  catchError(error =>
	    observableOf(new featureActions.LoginFailureAction({ error }))
	  )
	)
    )
  );
}
```

7. Update the app/root-store/my-feature-store/my-feature-store.module.ts with the following

```javascript
import { CommonModule } from "@angular/common";
import { NgModule } from "@angular/core";
import { EffectsModule } from "@ngrx/effects";
import { StoreModule } from "@ngrx/store";
import { MyFeatureStoreEffects } from "./effects";
import { featureReducer } from "./reducer";

@NgModule({
  imports: [
    CommonModule,
    StoreModule.forFeature("myFeature", featureReducer),
    EffectsModule.forFeature([MyFeatureStoreEffects])
  ],
  providers: [MyFeatureStoreEffects]
})
export class MyFeatureStoreModule {}
```

8. Create an app/root-store/my-feature-store/index.ts barrel export

```javascript
import * as MyFeatureStoreActions from "./actions";
import * as MyFeatureStoreSelectors from "./selectors";
import * as MyFeatureStoreState from "./state";

export { MyFeatureStoreModule } from "./my-feature-store.module";

export { MyFeatureStoreActions, MyFeatureStoreSelectors, MyFeatureStoreState };
```

9. Update app/root-store/root-state.ts and add a property for each feature that we have created previously

```javascript
import { MyFeatureStoreState } from "./my-feature-store";
import { MyOtherFeatureStoreState } from "./my-other-feature-store";

export interface State {
  myFeature: MyFeatureStoreState.State;
  myOtherFeature: MyOtherFeatureStoreState.State;
}
```

10. Update your app/root-store/root-store.module.ts by importing all feature modules, and importing the following NgRx modules

_StoreModule.forRoot({}) and EffectsModule.forRoot([]):_

```javascript
import { CommonModule } from "@angular/common";
import { NgModule } from "@angular/core";
import { EffectsModule } from "@ngrx/effects";
import { StoreModule } from "@ngrx/store";
import { MyFeatureStoreModule } from "./my-feature-store/";
import { MyOtherFeatureStoreModule } from "./my-other-feature-store/";

@NgModule({
  imports: [
    CommonModule,
    MyFeatureStoreModule,
    MyOtherFeatureStoreModule,
    StoreModule.forRoot({}),
    EffectsModule.forRoot([])
  ],
  declarations: []
})
export class RootStoreModule {}
```

11. Create an app/root-store/selectors.ts file. This will hold any root state level selectors, such as a Loading property, or even an aggregate Error property

```javascript
import { createSelector, MemoizedSelector } from "@ngrx/store";
import { MyFeatureStoreSelectors } from "./my-feature-store";

import { MyOtherFeatureStoreSelectors } from "./my-other-feature-store";

export const selectError: MemoizedSelector<object, string> = createSelector(
  MyFeatureStoreSelectors.selectMyFeatureError,
  MyOtherFeatureStoreSelectors.selectMyOtherFeatureError,
  (myFeatureError: string, myOtherFeatureError: string) => {
    return myFeature || myOtherFeature;
  }
);

export const selectIsLoading: MemoizedSelector<
  object,
  boolean
> = createSelector(
  MyFeatureStoreSelectors.selectMyFeatureIsLoading,
  MyOtherFeatureStoreSelectors.selectMyOtherFeatureIsLoading,
  (myFeature: boolean, myOtherFeature: boolean) => {
    return myFeature || myOtherFeature;
  }
);
```

12. Create an app/root-store/index.ts barrel export for your store with the following

```javascript
import { RootStoreModule } from "./root-store.module";
import * as RootStoreSelectors from "./selectors";
import * as RootStoreState from "./state";
export * from "./my-feature-store";
export * from "./my-other-feature-store";
export { RootStoreState, RootStoreSelectors, RootStoreModule };
```

#### Wiring up the Root Store Module to your Application

Now that we have built our Root Store Module, composed of Feature Store Modules, let’s add it to the main app.module.ts and show just how neat and clean the wiring up process is.

1. Add RootStoreModule to your application’s NgModule.imports array. Make sure that when you import the module to pull from the barrel export

```javascript
import { RootStoreModule } from "./root-store";
```

2. Here’s an example container component that is using the store

```javascript
import { Component, OnInit } from '@angular/core';
import { Store } from '@ngrx/store';
import { Observable } from 'rxjs';
import { MyModel } from '../../models';
import {
  RootStoreState,
  MyFeatureStoreActions,
  MyFeatureStoreSelectors
} from '../../root-store';

@Component({
  selector: 'app-my-feature',
  styleUrls: ['my-feature.component.css'],
  templateUrl: './my-feature.component.html'
})
export class MyFeatureComponent implements OnInit {
  myFeatureItems$: Observable<MyModel[]>;
  error$: Observable<string>;
  isLoading$: Observable<boolean>;

  constructor(private store$: Store<RootStoreState.State>) {}

  ngOnInit() {
    this.myFeatureItems$ = this.store$.select(
      MyFeatureStoreSelectors.selectAllMyFeatureItems
    );

    this.error$ = this.store$.select(
      MyFeatureStoreSelectors.selectUnProcessedDocumentError
    );

    this.isLoading$ = this.store$.select(
      MyFeatureStoreSelectors.selectUnProcessedDocumentIsLoading
    );

    this.store$.dispatch(
      new MyFeatureStoreActions.LoadRequestAction()
    );
  }
}
```
````
